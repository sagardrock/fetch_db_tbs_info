select df.tablespace_name as Tablespace,totalusedspace as Used_MB,(df.totalspace - tu.totalusedspace) as Free_MB,df.totalspace as Total_MB,round(100 *( (df.totalspace - tu.totalusedspace)/ df.totalspace)) as Pct_Free from (select tablespace_name,round(sum(bytes) / 1048576) as TotalSpace from dba_data_files group by tablespace_name) df, (select round(sum(bytes)/(1024*1024)) as totalusedspace, tablespace_name from dba_segments group by tablespace_name) tu where df.tablespace_name = tu.tablespace_name order by 5 asc;
exit;
